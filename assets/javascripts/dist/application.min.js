!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.barba=e()}(this,function(){var o=(i.prototype.then=function(r,n){var o=new i,t=this.s;if(t){var e=1&t?r:n;if(e){try{a(o,1,e(this.v))}catch(t){a(o,2,t)}return o}return this}return this.o=function(t){try{var e=t.v;1&t.s?a(o,1,r?r(e):e):n?a(o,1,n(e)):a(o,2,e)}catch(t){a(o,2,t)}},o},i);function i(){}function a(t,e,r){if(!t.s){if(r instanceof o){if(!r.s)return void(r.o=a.bind(null,t,e));1&e&&(e=r.s),r=r.v}if(r&&r.then)return void r.then(a.bind(null,t,e),a.bind(null,t,2));t.s=e,t.v=r;var n=t.o;n&&n(t)}}function p(t,e){try{var r=t()}catch(t){return e(t)}return r&&r.then?r.then(void 0,e):r}var r,t;Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")),(t=r||(r={}))[t.off=0]="off",t[t.error=1]="error",t[t.warning=2]="warning",t[t.info=3]="info",t[t.debug=4]="debug";function l(t){this.m=t}var e=r.off;l.getLevel=function(){return e},l.setLevel=function(t){return e=r[t]},l.prototype.error=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];this.P(console.error,r.error,t)},l.prototype.warn=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];this.P(console.warn,r.warning,t)},l.prototype.info=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];this.P(console.info,r.info,t)},l.prototype.debug=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];this.P(console.log,r.debug,t)},l.prototype.P=function(t,e,r){e<=l.getLevel()&&t.apply(console,["["+this.m+"] "].concat(r))};function n(){this.logger=new l("@barba/core"),this.all=["ready","page","reset","currentAdded","currentRemoved","nextAdded","nextRemoved","beforeAppear","appear","afterAppear","appearCanceled","before","beforeLeave","leave","afterLeave","leaveCanceled","beforeEnter","enter","afterEnter","enterCanceled","after"],this.registered=new Map,this.init()}n.prototype.init=function(){var n=this;this.registered.clear(),this.all.forEach(function(r){n[r]||(n[r]=function(t,e){void 0===e&&(e=null),n.registered.has(r)||n.registered.set(r,new Set),n.registered.get(r).add({ctx:e,fn:t})})})},n.prototype.do=function(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];this.registered.has(t)&&this.registered.get(t).forEach(function(t){t.fn.apply(t.ctx,e)})},n.prototype.clear=function(){var e=this;this.all.forEach(function(t){delete e[t]}),this.init()},n.prototype.help=function(){this.logger.info("[@barba/core] Available hooks: "+this.all),this.logger.info("[@barba/core] Registered hooks: "+Object.keys(this.registered))};function s(t,e,r){return t instanceof RegExp?function(t,e){if(!e)return t;var r=t.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)e.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return t}(t,e):Array.isArray(t)?function(t,e,r){for(var n=[],o=0;o<t.length;o++)n.push(s(t[o],e,r).source);return new RegExp("(?:"+n.join("|")+")",g(r))}(t,e,r):(n=e,m(d(t,o=r),n,o));var n,o}var u=new n,c=d,h=v,f=m,A="/",P=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function d(t,e){for(var r,n=[],o=0,i=0,a="",s=e&&e.delimiter||A,u=e&&e.whitelist||void 0,c=!1;null!==(r=P.exec(t));){var p=r[0],h=r[1],f=r.index;if(a+=t.slice(i,f),i=f+p.length,h)a+=h[1],c=!0;else{var l="",d=r[2],v=r[3],g=r[4],m=r[5];if(!c&&a.length){var y=a.length-1,w=a[y];(!u||-1<u.indexOf(w))&&(l=w,a=a.slice(0,y))}a&&(n.push(a),a="",c=!1);var b=v||g,E=l||s;n.push({name:d||o++,prefix:l,delimiter:E,optional:"?"===m||"*"===m,repeat:"+"===m||"*"===m,pattern:b?(x=b,x.replace(/([=!:$\/()])/g,"\\$1")):"[^"+$(E===s?E:E+s)+"]+?"})}}var x;return(a||i<t.length)&&n.push(a+t.substr(i)),n}function v(c){for(var p=new Array(c.length),t=0;t<c.length;t++)"object"==typeof c[t]&&(p[t]=new RegExp("^(?:"+c[t].pattern+")$"));return function(t,e){for(var r="",n=e&&e.encode||encodeURIComponent,o=0;o<c.length;o++){var i=c[o];if("string"!=typeof i){var a,s=t?t[i.name]:void 0;if(Array.isArray(s)){if(!i.repeat)throw new TypeError('Expected "'+i.name+'" to not repeat, but got array');if(0===s.length){if(i.optional)continue;throw new TypeError('Expected "'+i.name+'" to not be empty')}for(var u=0;u<s.length;u++){if(a=n(s[u],i),!p[o].test(a))throw new TypeError('Expected all "'+i.name+'" to match "'+i.pattern+'"');r+=(0===u?i.prefix:i.delimiter)+a}}else if("string"!=typeof s&&"number"!=typeof s&&"boolean"!=typeof s){if(!i.optional)throw new TypeError('Expected "'+i.name+'" to be '+(i.repeat?"an array":"a string"))}else{if(a=n(String(s),i),!p[o].test(a))throw new TypeError('Expected "'+i.name+'" to match "'+i.pattern+'", but got "'+a+'"');r+=i.prefix+a}}else r+=i}return r}}function $(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function g(t){return t&&t.sensitive?"":"i"}function m(t,e,r){for(var n=(r=r||{}).strict,o=!1!==r.start,i=!1!==r.end,a=r.delimiter||A,s=[].concat(r.endsWith||[]).map($).concat("$").join("|"),u=o?"^":"",c=0;c<t.length;c++){var p=t[c];if("string"==typeof p)u+=$(p);else{var h=p.repeat?"(?:"+p.pattern+")(?:"+$(p.delimiter)+"(?:"+p.pattern+"))*":p.pattern;e&&e.push(p),u+=p.optional?p.prefix?"(?:"+$(p.prefix)+"("+h+"))?":"("+h+")?":$(p.prefix)+"("+h+")"}}if(i)n||(u+="(?:"+$(a)+")?"),u+="$"===s?"$":"(?="+s+")";else{var f=t[t.length-1],l="string"==typeof f?f[f.length-1]===a:void 0===f;n||(u+="(?:"+$(a)+"(?="+s+"))?"),l||(u+="(?="+$(a)+"|"+s+")")}return new RegExp(u,g(r))}s.parse=c,s.compile=function(t,e){return v(d(t,e))},s.tokensToFunction=h,s.tokensToRegExp=f;function y(){this.g=w,this.A=new DOMParser}var w={container:"container",namespace:"namespace",prefix:"data-barba",prevent:"prevent",wrapper:"wrapper"};y.prototype.toString=function(t){return t.outerHTML},y.prototype.toDocument=function(t){return this.A.parseFromString(t,"text/html")},y.prototype.toElement=function(t){var e=document.createElement("div");return e.innerHTML=t,e},y.prototype.getHtml=function(t){return void 0===t&&(t=document),this.toString(t.documentElement)},y.prototype.getWrapper=function(t){return void 0===t&&(t=document),t.querySelector("["+this.g.prefix+'="'+this.g.wrapper+'"]')},y.prototype.getContainer=function(t){return void 0===t&&(t=document),t.querySelector("["+this.g.prefix+'="'+this.g.container+'"]')},y.prototype.getNamespace=function(t){void 0===t&&(t=document);var e=t.querySelector("["+this.g.prefix+"-"+this.g.namespace+"]");return e?e.getAttribute(this.g.prefix+"-"+this.g.namespace):null},y.prototype.getHref=function(t){return t.getAttribute&&t.getAttribute("href")?t.href:null};function b(t,r){try{var e=function(){if(!r.html)return Promise.resolve(t).then(function(t){if(t){var e=L.toElement(t);r.namespace=L.getNamespace(e),r.container=L.getContainer(e),r.html=t}})}();return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(t){return Promise.reject(t)}}function E(){return window.location.origin}function x(t){var e=t||window.location.port,r=window.location.protocol;return""!==e?parseInt(e,10):"https:"===r?443:80}function R(t){return S(t).path}function k(t){if(this.T=[],"boolean"==typeof t)this.j=t;else{var e=Array.isArray(t)?t:[t];this.T=e.map(function(t){return T(t)})}}var L=new y,T=s,j={updateNext:b,pathToRegexp:T},S=function(t){var e,r=q(t),n={},o=r.indexOf("#");0<=o&&(e=r.slice(o+1),r=r.slice(0,o));var i=r.indexOf("?");return 0<=i&&(n=O(r.slice(i+1)),r=r.slice(0,i)),{hash:e,path:r,query:n}},O=function(t){return t.split("&").reduce(function(t,e){var r=e.split("=");return t[r[0]]=r[1],t},{})},q=function(t,e){return void 0===e&&(e=E()),t.replace(e,"")},H={getHref:function(){return window.location.href},getOrigin:E,getPort:x,getPath:R,parse:S,parseQuery:O,clean:q};k.prototype.checkUrl=function(t){if("boolean"==typeof this.j)return this.j;var e=S(t).path;return this.T.some(function(t){return null!==t.exec(e)})};function W(){this.R=[]}var C,N=((C=k)&&(M.__proto__=C),((M.prototype=Object.create(C&&C.prototype)).constructor=M).prototype.set=function(t,e,r){return this.checkUrl(t)||this.R.set(t,{action:r,request:e}),{action:r,request:e}},M.prototype.get=function(t){return this.R.get(t)},M.prototype.getRequest=function(t){return this.R.get(t).request},M.prototype.getAction=function(t){return this.R.get(t).action},M.prototype.has=function(t){return this.R.has(t)},M.prototype.delete=function(t){return this.R.delete(t)},M.prototype.update=function(t,e){var r=Object.assign({},this.R.get(t),e);return this.R.set(t,r),r},M),I={current:{configurable:!0},previous:{configurable:!0}};function M(t){C.call(this,t),this.R=new Map}function U(o,i,a){return void 0===i&&(i=2e3),new Promise(function(e,r){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE)if(200===n.status)e(n.responseText);else if(n.status){var t={status:n.status,statusText:n.statusText};a(o,t),r(t)}},n.ontimeout=function(){var t=new Error("Timeout error ["+i+"]");a(o,t),r(t)},n.onerror=function(){var t=new Error("Fetch error");a(o,t),r(t)},n.open("GET",o),n.timeout=i,n.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml"),n.setRequestHeader("x-barba","yes"),n.send()})}W.prototype.add=function(t,e){this.R.push({url:t,ns:e})},W.prototype.remove=function(){this.R.pop()},W.prototype.push=function(t,e){this.add(t,e),window.history&&window.history.pushState(null,"",t)},W.prototype.cancel=function(){this.remove(),window.history&&window.history.back()},I.current.get=function(){return this.R[this.R.length-1]},I.previous.get=function(){return this.R.length<2?null:this.R[this.R.length-2]},Object.defineProperties(W.prototype,I);function _(){return!window.history.pushState}function D(t){return!t.el||!t.href}function G(t){var e=t.event;return 1<e.which||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey}function B(t){var e=t.el;return e.hasAttribute("target")&&"_blank"===e.target}function F(t){var e=t.el;return window.location.protocol!==e.protocol||window.location.hostname!==e.hostname}function K(t){var e=t.el;return x()!==x(e.port)}function V(t){var e=t.el;return e.getAttribute&&"string"==typeof e.getAttribute("download")}function X(t){return t.el.hasAttribute(w.prefix+"-"+w.prevent)}function J(t){return Boolean(t.el.closest("["+w.prefix+"-"+w.prevent+'="all"]'))}function Q(t){return R(t.href)===R(window.location.href)}function z(t){void 0===t&&(t=[]),this.logger=new l("@barba/core"),this.all=[],this.appear=[],this.O=[{name:"namespace",type:"strings"},{name:"custom",type:"function"}],t&&(this.all=this.all.concat(t)),this.k()}var Y,Z,tt,et=((tt=k)&&(nt.__proto__=tt),((nt.prototype=Object.create(tt&&tt.prototype)).constructor=nt).prototype.init=function(){this.add("pushState",_),this.add("exists",D),this.add("newTab",G),this.add("blank",B),this.add("corsDomain",F),this.add("corsPort",K),this.add("download",V),this.add("preventSelf",X),this.add("preventAll",J),this.add("sameUrl",Q,!1)},nt.prototype.add=function(t,e,r){void 0===r&&(r=!0),this.tests.set(t,e),r&&this.suite.push(t)},nt.prototype.run=function(t,e,r,n){return this.tests.get(t)({el:e,event:r,href:n})},nt.prototype.checkLink=function(e,r,n){var o=this;return this.suite.some(function(t){return o.run(t,e,r,n)})},nt),rt=((Z=(Y={exports:{}}).exports=function(a,e){return e=e||function(){},function(){var o=!1,i=arguments,t=new Promise(function(r,n){var t,e=a.apply({async:function(){return o=!0,function(t,e){t?n(t):r(e)}}},Array.prototype.slice.call(i));o||(!(t=e)||"object"!=typeof t&&"function"!=typeof t||"function"!=typeof t.then?r(e):e.then(r,n))});return t.then(e.bind(null,null),e),t}}).cb=function(e,t){return Z(function(){var t=Array.prototype.slice.call(arguments);return t.length===e.length-1&&t.push(this.async()),e.apply(this,t)},t)},Y.exports);function nt(t){tt.call(this,t),this.suite=[],this.tests=new Map,this.init()}z.prototype.add=function(t,e){switch(t){case"rule":this.O.splice(e.position||0,0,e.value);break;case"transition":default:this.all.push(e)}this.k()},z.prototype.resolve=function(o,i){var a=this;void 0===i&&(i={});var t=i.appear?this.appear:this.all;t=t.filter(i.self?function(t){return t.name&&"self"===t.name}:function(t){return!t.name||"self"!==t.name});var s=new Map,e=t.find(function(e){var r=!0,n={};return!(!i.self||"self"!==e.name)||(a.O.reverse().forEach(function(t){r&&(r=a.L(e,t,o,n),i.appear||(e.from&&e.to&&(r=a.L(e,t,o,n,"from")&&a.L(e,t,o,n,"to")),e.from&&!e.to&&(r=a.L(e,t,o,n,"from")),!e.from&&e.to&&(r=a.L(e,t,o,n,"to"))))}),s.set(e,n),r)}),r=s.get(e),n=[];return n.push(i.appear?"appear":"page"),i.self&&n.push("self"),r?this.logger.info("Transition found ["+n.join(",")+"]",r):this.logger.info("No transition found ["+n.join(",")+"]"),e},z.prototype.k=function(){var e=this;this.all=this.all.map(function(t){return e.C(t)}).sort(function(t,e){return t.priority-e.priority}).reverse().map(function(t){return delete t.priority,t}),this.appear=this.all.filter(function(t){return t.appear})},z.prototype.L=function(t,e,r,n,o){var i=!0,a=!1,s=t,u=e.name,c=u,p=u,h=u,f=o?s[o]:s,l="to"===o?r.next:r.current;if(o?f&&f[u]:f[u]){switch(e.type){case"strings":default:var d=Array.isArray(f[c])?f[c]:[f[c]];l[c]&&-1!==d.indexOf(l[c])&&(a=!0),-1===d.indexOf(l[c])&&(i=!1);break;case"object":var v=Array.isArray(f[p])?f[p]:[f[p]];l[p]&&l[p].name&&-1!==v.indexOf(l[p].name)&&(a=!0),-1===v.indexOf(l[p].name)&&(i=!1);break;case"function":f[h](r)?a=!0:i=!1}a&&(o?(n[o]=n[o]||{},n[o][u]=s[o][u]):n[u]=s[u])}return i},z.prototype.M=function(t,e,r){var n=0;return(t[e]||t.from&&t.from[e]||t.to&&t.to[e])&&(n+=Math.pow(10,r),t.from&&t.from[e]&&(n+=1),t.to&&t.to[e]&&(n+=2)),n},z.prototype.C=function(r){var n=this,o=r.priority=0;return this.O.forEach(function(t,e){o+=n.M(r,t.name,e+1)}),r.priority=o,r};function ot(t){void 0===t&&(t=[]),this.logger=new l("@barba/core"),this.S=!1,this.store=new z(t)}var it={isRunning:{configurable:!0},hasAppear:{configurable:!0},hasSelf:{configurable:!0},shouldWait:{configurable:!0}};ot.prototype.get=function(t,e){return this.store.resolve(t,e)},it.isRunning.get=function(){return this.S},it.hasAppear.get=function(){return 0<this.store.appear.length},it.hasSelf.get=function(){return this.store.all.some(function(t){return"self"===t.name})},it.shouldWait.get=function(){return this.store.all.some(function(t){return t.to&&!t.to.route||t.sync})},ot.prototype.doAppear=function(t){var e=t.data,r=t.transition;try{var n=this;function o(t){n.S=!1}var i=r||{};n.S=!0;var a=p(function(){return Promise.resolve(n.$("beforeAppear",e,i)).then(function(){return Promise.resolve(n.appear(e,i)).then(function(){return Promise.resolve(n.$("afterAppear",e,i)).then(function(){})})})},function(t){return n.logger.error(t),Promise.resolve(n.$("appearCanceled",e,i)).then(function(){throw new Error("Transition error [appear]")})});return a&&a.then?a.then(o):o()}catch(t){return Promise.reject(t)}},ot.prototype.doPage=function(t){var n=t.data,e=t.transition,o=t.page,i=t.wrapper;try{var a=this;function r(t){a.S=!1}var s=e||{},u=!0===s.sync||!1;a.S=!0,a.logger.debug("DO_PAGE",o);var c=p(function(){function t(){return Promise.resolve(a.$("before",n,s)).then(function(){function t(t){a.$("after",n,s)}var e=function(){if(u)return p(function(){return a.q(n,i),Promise.resolve(a.$("beforeLeave",n,s)).then(function(){return Promise.resolve(a.$("beforeEnter",n,s)).then(function(){return Promise.resolve(Promise.all([a.leave(n,s),a.enter(n,s)])).then(function(){return Promise.resolve(a.$("afterLeave",n,s)).then(function(){return Promise.resolve(a.$("afterEnter",n,s)).then(function(){a.N(n)})})})})})},function(){return Promise.resolve(a.$("leaveCanceled",n,s)).then(function(){return Promise.resolve(a.$("enterCanceled",n,s)).then(function(){throw new Error("Transition error [page][sync]")})})});function t(t){return p(function(){var t=function(){if(!1!==e)return Promise.resolve(a.$("beforeEnter",n,s)).then(function(){return a.q(n,i),Promise.resolve(a.enter(n,s,e)).then(function(){return Promise.resolve(a.$("afterEnter",n,s)).then(function(){})})})}();if(t&&t.then)return t.then(function(){})},function(){return Promise.resolve(a.$("leaveCanceled",n,s)).then(function(){return Promise.resolve(a.$("enterCanceled",n,s)).then(function(){throw new Error("Transition error [page][enter]")})})})}var e=!1,r=p(function(){return Promise.resolve(a.$("beforeLeave",n,s)).then(function(){return a.logger.debug("T:LEAVE",a.leave),Promise.resolve(Promise.all([a.leave(n,s),b(o,n.next)]).then(function(t){return t[0]})).then(function(t){return e=t,Promise.resolve(a.$("afterLeave",n,s)).then(function(){a.N(n)})})})},function(){return Promise.resolve(a.$("leaveCanceled",n,s)).then(function(){throw new Error("Transition error [page][leave]")})});return r&&r.then?r.then(t):t()}();return e&&e.then?e.then(t):t()})}var e=function(){if(u)return Promise.resolve(b(o,n.next)).then(function(){})}();return e&&e.then?e.then(t):t()},function(t){throw a.logger.error(t),new Error("Transition error")});return c&&c.then?c.then(r):r()}catch(t){return Promise.reject(t)}},ot.prototype.appear=function(t,e){return u.do("appear",t,e),e.appear?rt(e.appear)(t):Promise.resolve()},ot.prototype.leave=function(t,e){return u.do("leave",t,e),this.logger.debug("T:LEAVE"),e.leave?rt(e.leave)(t):Promise.resolve()},ot.prototype.enter=function(t,e,r){return u.do("enter",t,e),this.logger.debug("T:ENTER"),e.enter?rt(e.enter)(t,r):Promise.resolve()},ot.prototype.$=function(t,e,r){return u.do(t,e,r),r[t]?rt(r[t])(e):Promise.resolve()},ot.prototype.q=function(t,e){e.appendChild(t.next.container),u.do("nextAdded",t)},ot.prototype.N=function(t){t.current.container.remove(),u.do("currentRemoved",t)},Object.defineProperties(ot.prototype,it);function at(t){var e=this;this.names=["beforeAppear","afterAppear","beforeLeave","afterLeave","beforeEnter","afterEnter"],this.byNamespace=new Map,0!==t.length&&(t.forEach(function(t){e.byNamespace.set(t.namespace,t)}),this.names.forEach(function(t){u[t](e.B(t),e)}),u.ready(this.B("beforeEnter"),this))}at.prototype.B=function(n){var o=this;return function(t){var e=n.match(/enter/i)?t.next:t.current,r=o.byNamespace.get(e.namespace);r&&r[n]&&r[n](t)}},Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});function st(){this.version="2.1.0",this.schemaPage=ut,this.Logger=l,this.logger=new l("@barba/core"),this.plugins=[],this.hooks=u,this.dom=L,this.helpers=j,this.request=U,this.url=H}var ut={container:void 0,html:void 0,namespace:void 0,url:{hash:void 0,href:void 0,path:void 0,query:{}}},ct={data:{configurable:!0},wrapper:{configurable:!0}};return st.prototype.use=function(t,e){var r=this.plugins;-1<r.indexOf(t)?this.logger.warn("Plugin ["+t.name+"] already installed."):"function"==typeof t.install?(t.install(this,e),r.push(t)):this.logger.warn("Plugin ["+t.name+'] has no "install" method.')},st.prototype.init=function(t){void 0===t&&(t={});var e=t.transitions;void 0===e&&(e=[]);var r=t.views;void 0===r&&(r=[]);var n=t.prevent;void 0===n&&(n=null);var o=t.timeout;void 0===o&&(o=2e3);var i=t.requestError,a=t.cacheIgnore;void 0===a&&(a=!1);var s=t.prefetchIgnore;void 0===s&&(s=!1);var u=t.schema;void 0===u&&(u=w);var c=t.debug;void 0===c&&(c=!1);var p=t.logLevel;if(void 0===p&&(p="off"),l.setLevel(!0===c?"debug":p),Object.keys(u).forEach(function(t){w[t]&&(w[t]=u[t])}),this.D=i,this.timeout=o,this.cacheIgnore=a,this.prefetchIgnore=s,this.H=this.dom.getWrapper(),!this.H)throw new Error("[@barba/core] No Barba wrapper found");this.H.setAttribute("aria-live","polite"),this.I();var h=this.data.current;if(!h.container)throw new Error("[@barba/core] No Barba container found");if(this.history=new W,this.cache=new N(a),this.prevent=new et(s),this.transitions=new ot(e),this.views=new at(r),null!==n){if("function"!=typeof n)throw new Error("[@barba/core] Prevent should be a function");this.prevent.add("preventCustom",n)}this.history.add(h.url.href,h.namespace),this.cache.set(h.url.href,Promise.resolve(h.html),"init"),this.U=this.U.bind(this),this._=this._.bind(this),this.G=this.G.bind(this),this.V(),this.plugins.forEach(function(t){return t.init()});var f=this.data;f.trigger="barba",f.next=f.current,this.hooks.do("ready",f),this.appear(),this.I()},st.prototype.destroy=function(){this.I(),this.X(),this.hooks.clear(),this.plugins=[]},ct.data.get=function(){return this.F},ct.wrapper.get=function(){return this.H},st.prototype.force=function(t){window.location.assign(t)},st.prototype.go=function(t,e,r){var n;if(void 0===e&&(e="barba"),!(n="popstate"===e?this.history&&this.url.getPath(this.history.current.url)===this.url.getPath(t):this.prevent.run("sameUrl",null,null,t))||this.transitions.hasSelf)return r&&(r.stopPropagation(),r.preventDefault()),this.page(t,e,n)},st.prototype.appear=function(){try{var r=this,t=function(){if(r.transitions.hasAppear){var t=p(function(){var t=r.F,e=r.transitions.get(t,{appear:!0});return Promise.resolve(r.transitions.doAppear({transition:e,data:t})).then(function(){})},function(t){r.logger.error(t)});if(t&&t.then)return t.then(function(){})}}();return t&&t.then?t.then(function(){}):void 0}catch(r){return Promise.reject(r)}},st.prototype.page=function(r,n,o){try{var i=this;function t(){"popstate"===n?i.history.add(r,i.data.next.namespace):i.history.push(r,i.data.next.namespace);var e=i.data;i.hooks.do("page",e);var t=p(function(){var t=i.transitions.get(e,{appear:!1,self:o});return Promise.resolve(i.transitions.doPage({data:e,page:a,transition:t,wrapper:i.H})).then(function(){i.W(e),i.I()})},function(t){i.logger.error(t)});if(t&&t.then)return t.then(function(){})}if(i.transitions.isRunning)return void i.force(r);i.data.next.url=Object.assign({},{href:r},i.url.parse(r)),i.data.trigger=n;var a=i.cache.has(r)?i.cache.update(r,{action:"click"}).request:i.cache.set(r,i.request(r,i.timeout,i.onRequestError.bind(i,n)),"click").request,e=function(){if(i.transitions.shouldWait)return Promise.resolve(b(a,i.data.next)).then(function(){})}();return e&&e.then?e.then(t):t()}catch(r){return Promise.reject(r)}},st.prototype.onRequestError=function(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];var n=e[0],o=e[1],i=this.cache.getAction(n);return this.cache.delete(n),!(this.D&&!1===this.D(t,i,n,o)||("click"===i&&this.force(n),1))},st.prototype.V=function(){!0!==this.prefetchIgnore&&(document.addEventListener("mouseover",this.U),document.addEventListener("touchstart",this.U)),document.addEventListener("click",this._),window.addEventListener("popstate",this.G)},st.prototype.X=function(){!0!==this.prefetchIgnore&&(document.removeEventListener("mouseover",this.U),document.removeEventListener("touchstart",this.U)),document.removeEventListener("click",this._),window.removeEventListener("popstate",this.G)},st.prototype.U=function(t){var e=this,r=this.J(t);if(r){var n=this.dom.getHref(r);this.prevent.checkUrl(n)||this.cache.has(n)||this.cache.set(n,this.request(n,this.timeout,this.onRequestError.bind(this,r)).catch(function(t){e.logger.error(t)}),"enter")}},st.prototype._=function(t){var e=this.J(t);e&&this.go(this.dom.getHref(e),e,t)},st.prototype.G=function(){this.go(this.url.getHref(),"popstate")},st.prototype.J=function(t){for(var e=t.target;e&&!this.dom.getHref(e);)e=e.parentNode;if(e&&!this.prevent.checkLink(e,t,e.href))return e},st.prototype.I=function(){var t=this.url.getHref(),e={container:this.dom.getContainer(),html:this.dom.getHtml(),namespace:this.dom.getNamespace(),url:Object.assign({},{href:t},this.url.parse(t))};this.F={current:e,next:Object.assign({},this.schemaPage),trigger:void 0},this.hooks.do("reset",this.data)},st.prototype.W=function(t){var e=this.dom.toDocument(t.next.html);document.title=e.title},Object.defineProperties(st.prototype,ct),new st}),$=jQuery,window.App=window.App||{},$(function(){App.windowWidth=$(window).width(),App.windowHeight=$(window).height(),App.documentWidth=$(document).width(),App.documentHeight=$(document).height(),App.scrollTop=$(window).scrollTop(),App.homeUrl=$("html").attr("data-home-url"),App.ajaxUrl=$("html").attr("data-ajax-url")}),$(window).scroll(function(){App.scrollTop=$(window).scrollTop()}),$(window).resize(function(){App.windowWidth=$(window).width(),App.windowHeight=$(window).height(),App.documentWidth=$(document).width(),App.documentHeight=$(document).height()}),App.breakpoint=function(t){var e;return e=App.windowWidth<480?"xs":992<=App.windowWidth?"lg":768<=App.windowWidth?"md":"sm",void 0===t?e:"xs"==t?App.windowWidth<480:"sm"==t?480<=App.windowWidth&&App.windowWidth<768:"md"==t?768<=App.windowWidth&&App.windowWidth<992:"lg"==t?992<=App.windowWidth:void 0},App.breakpoint.isMobile=function(){return App.breakpoint("xs")||App.breakpoint("sm")};